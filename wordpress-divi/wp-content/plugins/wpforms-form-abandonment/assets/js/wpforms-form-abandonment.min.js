!function($){var n={},o=!1,a=!1,t={init:function(){var n="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0;$(document).on("input",".wpforms-form-abandonment :input",t.prepData),$(document).on("change",".wpforms-form-abandonment input[type=radio]",t.prepData),$(document).on("change",".wpforms-form-abandonment input[type=checkbox]",t.prepData),$(document).on("change",".wpforms-form-abandonment .wpforms-timepicker",t.prepData),$(document).on("mouseleave",this.abandonMouse),n?$(document).on("click",this.abandonClick):$(document).on("mousedown",this.abandonClick)},prepData:function(a){var e=$(a.target).closest(".wpforms-form"),r=e.data("formid");n[r]=e.serializeArray(),o=JSON.stringify(n),t.debug("Preping data")},sendData:function(){o&&!a&&(a=!0,setTimeout(function(){a=!1},1e4),t.debug("Sending"),$.post(wpforms_form_abandonment.ajaxurl,{action:"wpforms_form_abandonment",forms:o}),n={},o=!1)},abandonMouse:function(n){n.offsetX<-1||n.clientY>20||(t.debug("Mouse abandoned"),t.sendData())},abandonClick:function(n){for(var o=n.srcElement||n.target;o&&(void 0===o.tagName||"a"!==o.tagName.toLowerCase()||!o.href);)o=o.parentNode;if(o&&o.href){t.debug("Click abandoned");var a=o.href,e="internal";if("mailto"===o.protocol?e="mailto":-1===a.indexOf(wpforms_form_abandonment.home_url)&&(e="external"),("external"===e||"internal"===e)&&!a.match(/^javascript\:/i)){var r=!(!o.target||o.target.match(/^_(self|parent|top)$/i))&&o.target;(n.ctrlKey||n.shiftKey||n.metaKey||2===n.which)&&(r="_blank"),r?t.sendData():(n.preventDefault?n.preventDefault():n.returnValue=!1,t.sendData(),window.location.href=a)}}},debug:function(n){window.location.hash&&"#wpformsfadebug"===window.location.hash&&console.log("WPForms FA: "+n)}};t.init()}(jQuery);